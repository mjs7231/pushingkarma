# _uwsgi.yml
# Install and configure uWSGI
---
- name: Install uWSGI
  pip: name=uwsgi

- name: Create uWSGI hosts dir
  file:
    path=/etc/uwsgi/sites
    state=directory

- name: Create uWSGI App {{project_name}}-web.ini
  template:
    src=conf/uwsgi-web.ini.j2
    dest=/etc/uwsgi/sites/{{project_name}}-web.ini
  notify: Restart Services

- name: Create uWSGI App {{project_name}}-django.ini
  template:
    src=conf/uwsgi-django.ini.j2
    dest=/etc/uwsgi/sites/{{project_name}}-django.ini
  notify: Restart Services

- name: Create uWSGI Service
  template:
    src=conf/uwsgi.service.j2
    dest=/etc/systemd/system/uwsgi.service
  notify: Restart Services
